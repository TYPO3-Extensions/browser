"use strict";window.OSM={configuration:{wms:"OSM",type:"Mapnik",mapID:"oxMap-area",zoomWheelEnable:true,mapMarkerEvent:"click"},osmOptions:{controls:[new OpenLayers.Control.Attribution()],projection:new OpenLayers.Projection("EPSG:4326"),units:"degrees",allOverlays:true,theme:configuration.cssPath?configuration.cssPath:null},map:null,wmsLayer:null,wms:{OSM:{Osmarender:new OpenLayers.Layer.OSM.Osmarender,Mapnik:new OpenLayers.Layer.OSM.Mapnik,ROADMAP:new OpenLayers.Layer.Google("Google Streets",{numZoomLevels:20})}},tt:null,Render:function(){var d=oxMap.OSM,e=d.configuration,h,f,c=[],g;e=oxMap.Utils.merge(d.configuration,oxMap.cfg);if(e.imagePath){OpenLayers.ImgPath=e.imagePath}h=e.type.split(",");f=h.length;if(!h||f<1){new Error("wms",e.wms+" "+e.type,true);return false}d.osmOptions.controls=d.osmOptions.controls.concat(new oxMap.OSM.Controls(e.mapControls.split(",")));for(var b=0;b<f;b+=1){c.push(d.wms[e.wms][h[b]])}oxMap.OSM.map=new OpenLayers.Map(e.mapID,d.osmOptions);oxMap.OSM.map.addLayers(c);oxMap.OSM.map.setCenter(oxMap.OSM.LonLat([e.center.lon,e.center.lat]),e.startLevel);if(e.customMap&&e.customMap.bounds){oxMap.OSM.map.setOptions(oxMap.Utils.merge(oxMap.OSM.map.options,{restrictedExtent:oxMap.OSM.Util.createBoundObject(e.customMap.bounds,"WGS84")}))}oxMap.OSM.map.events.on({zoomend:function(){if(oxMap.OSM.tt){oxMap.OSM.tt.parentNode.removeChild(oxMap.OSM.tt);oxMap.OSM.tt=null}if(e.sector){if(oxMap.OSM.map.getZoom()<=e.sector.onZoomLevel){oxMap.OSM.Sector.setup()}else{oxMap.OSM.Sector.clearSector()}}}});oxMap.OSM.configuration.size=oxMap.OSM.map.getSize();oxMap.OSM.wmsLayer=c;oxMap.data=rawdata||(function(){new Error("data",null,true)})()},Controls:function(f){var d,c=f.length,h=[],g,e;for(d=0;d<c;d+=1){if(f[d]==="Navigation"){e=oxMap.OSM.configuration.zoomWheelEnable?{type:OpenLayers.Control.TYPE_TOGGLE,defaultDblClick:function(a){return},zoomWheelEnabled:true,mouseWheelOptions:{cumulative:false,interval:210}}:{defaultDblClick:function(a){return},zoomWheelEnabled:false};g=new OpenLayers.Control.Navigation(e)}else{g=new OpenLayers.Control[f[d]]()}h.push(g)}return h},LonLat:function(a){if(a.length===2){return new OpenLayers.LonLat(a[0],a[1]).transform(oxMap.OSM.Util.transformer.WGS84,oxMap.OSM.Util.transformer.map())}return false},Util:{transformer:{"null":null,WGS84:new OpenLayers.Projection("EPSG:4326"),OSM:new OpenLayers.Projection("EPSG:4326"),GMap:new OpenLayers.Projection("EPSG:900913"),map:function(){return oxMap.OSM.map.getProjectionObject()}},createIcon:function(d){var b=d[0],a=new OpenLayers.Size(d[1],d[2]),c=new OpenLayers.Pixel(d[3],d[4]);return new OpenLayers.Icon(b,a,c)},createBoundObject:function(e,d){var a=e.w,c=e.s,f=e.e,g=e.n,b=this,e=new OpenLayers.Bounds();e.extend(new OpenLayers.LonLat(a,c));e.extend(new OpenLayers.LonLat(f,g));if(d){e.transform(b.transformer[d],b.transformer.map())}return e},getCenter:function(){if(arguments.length!==4){return false}for(var d=0,c=arguments.length;d<c;d+=1){arguments[d]=arguments[d]*1}var f=arguments[0]+((arguments[2]-arguments[0])/2),e=arguments[1]+((arguments[3]-arguments[1])/2);return oxMap.OSM.LonLat([f,e])}}};