"use strict";window.Route=function(){var a=oxMap.OSM.Route,b={defaultStyle:{strokeWidth:1,strokeColor:"#000"}};a.createRoute=function(){var d=b.data.features,n={},g,u,m,x=d.length,w,f,j,o,q,p,A=[],v,e;for(;x--;){g=d[x]["properties"]["name"];if(!n[g]){n[g]={};n[g]["routes"]={}}n[g]["routes"][x]=d[x]["properties"]["name"]}for(u in n){f=new OpenLayers.Layer.Vector(u);f.oxType="route";v=[];e=[];for(m in n[u]["routes"]){w=d[m];j=[];o=w.geometry.coordinates;q=w.properties.style;for(var l=0,k=o.length;l<k;l+=1){p=oxMap.OSM.LonLat(o[l]);p=new OpenLayers.Geometry.Point(p.lon,p.lat);j.push(p)}v.push(new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(j),null,{strokeWidth:q.strokeWidth?q.strokeWidth:b.defaultStyle.strokeWidth,strokeColor:q.strokeColor?q.strokeColor:b.defaultStyle.strokeColor}));for(var h=0,i=w.properties.markerList.length;h<i;h+=1){e.push(w.properties.markerList[h])}}f.addFeatures(v);A.push(f);f.oxMarkerList=e}oxMap.OSM.map.addLayers(A)};a.setup=(function(){if(!oxMap.OSM.configuration.route){new Error("config","OSM.Route",true);return false}if(!oxMap.OSM.configuration.route.data){new Error("route",null,true);return false}OpenLayers.Layer.prototype.oxType;OpenLayers.Layer.prototype.oxMarkerList;b=oxMap.Utils.merge(b,oxMap.OSM.configuration.route);a.createRoute()})()};