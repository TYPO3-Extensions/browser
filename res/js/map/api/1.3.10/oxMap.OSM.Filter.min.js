"use strict";window.Filter=function(){var a=oxMap.OSM.Filter,c={wrapper:"oxMap-filter-module",items:"oxMap-filter-item",getDataByAjax:false},e=(function(){var f=document.getElementById(c.wrapper);if(f===null){return null}return f.getElementsByTagName("input")})();function b(g){var h,f=e.length,i=0;for(;f--;){if(e[f].name===g&&!e[f].checked){return false}}return true}function d(i,h,g){var f=i.length,j;for(;f--;){for(j=h.marker.length;j--;){if(i[f]["name"]===h.marker[j]){i[f]["icon"]["imageDiv"].style.display=g?"block":"none"}}}}a.filterStack=[];a.sortMarkerByCategory=function(i){var f=[],j=i.length,h;for(;j--;){h=i[j].split(/:/);if(f.length===0){f.push({cat:h[0],marker:[h[1]]});continue}for(var g=0;g<f.length;g+=1){if(f.length<0||f[g]["cat"]!==h[0]){f.push({cat:h[0],marker:[]})}f[g]["marker"].push(h[1])}}return f};a.filterMarkerByCategory=function(g,f){var h=oxMap.OSM.map.getLayersByName(g)[0];h.setVisibility(f);return h};a.filterRouteByCategory=function(f,i,h){var u=oxMap.cfg.route.data.features,o=oxMap.data,s,r=u.length,t,q,k,l,p,n,j,g;for(s=0;s<r;s+=1){if(u[s]["properties"]["name"]===i){u=u[s];g=oxMap.OSM.map.getLayersByName(i)[0];break}}g.setVisibility(h);k=u.properties.markerList;for(s=0,r=k.length;s<r;s+=1){j=k[s].split(/:/);l=oxMap.OSM.map.getLayersByName(j[0])[0].markers;for(t=l.length;t>-1;t-=1){if(l[t]&&l[t]["name"]===j[1]){l[t].display(h);break}}}};a.filterOnMap=function(h){var g=h.checked?true:false,f=oxMap.data[h.name]["route"];if(!f){a.filterMarkerByCategory(h.name,g)}else{a.filterRouteByCategory(h.name,f,g)}return true};a.getDataByAjax=function(){};a.setup=(function(){c=oxMap.Utils.merge(c,oxMap.OSM.configuration.filter);var k=document.getElementById(c.wrapper),h=c.items,i;if(!k){new Error("filter",null,true);return false}i=k.getElementsByTagName("input");for(var g=0,f=i.length;g<f;g+=1){var j=i[g].getAttribute("class");if(j.match(new RegExp(h))){a.filterOnMap(i[g]);a.filterStack.push(i[g])}}k.onchange=function(l){l=l||window.event;var m=l.target||l.srcElement;a.filterOnMap(m)}})()};