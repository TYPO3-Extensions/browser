<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Map for TYPO3 integration with OSM and OL</title>
  <style type="text/css">
    .oxTextLayer{border:1px solid green;border-radius:6px;background:#fff;width:200px;overflow:hidden;position:absolute;padding:6px;box-shadow:3px 3px 3px #3d3d3d;}
  </style>
  <base_XXX href="http://typo3-organiser.de/" />
</head>

<body>
  <h1>
    Muster Kartenausgabe für Einbindung OpenStreetMap (OSM)
  </h1>
  <form id="filter">
    <input type="checkbox" name="cat1" value="1" checked /><img src="./img/test1.png" /> cat1 
    <input type="checkbox" name="cat2" value="1" checked />cat2
  </form>
  <div id="oxMapArea" style="width:600px;height:400px;border:1px solid"></div>
  <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
  <script src="jsApi/lib/OpenLayers/OpenLayers_0.0.2.js"></script>
  <script src="jsApi/lib/OpenStreetMap/OpenStreetMap_0.0.2.js"></script>
  <script>
      // Be aware of the trailing slash!
    OpenLayers.ImgPath = "/typo3conf/ext/browser/res/js/map/lib/OpenLayers/img/";
    var markerData = {"cat1":{"icon":["./img/test1.png",14,14,0,0],"data":{"point1":{"coors":[9.6175669,48.9659301],"desc":"Punk1<br>Neue Box und der Inhalt geht über mehrere Zeilen"},"point2":{"coors":[9.555442525,48.933978799]}}},"cat2":{"icon":["./img/test2.png",14,14,0,0],"data":{"point3":{"coors":[9.538,48.89],"desc":"Punkt3<br>rote Sigantur"},"point4":{"coors":[9.6075669,48.9459301],"desc":"Punkt4<br>rote Sigantur"}}}}
  </script>
  <script src="jsApi/oxMapConfig_0.0.2.js"></script>
  <script src="jsApi/oxRenderMap_0.0.2.js"></script>
  <script>



  var filter = document.getElementsByTagName('input');
  for(var a=filter.length;a--;)
          filter[a].onchange = function(){
                  startFilter(this,this.name,this.value);
          };

  function startFilter(element,name,value){
          switchTo = value == 1 ? false : true; 
          element.value = switchTo == false ? 0 : 1;

  /*	Beispielfilteranwendung
  * 
  *	Das Beispiel liest den Wert einer Checkbox aus und übergibt an die map.filterLayer-Methode Name und Sichtbarkeit
          map				map-Object als Instance des oxMapRender-Konstruktors -> wird durch Einbettung der oxAPI oxRenderMap.js erzeugt;
          filterLayer		filter-Methode
                  @param	name		STRING			Layer-Name -->	es wird zwischen Markern ohne und mit Informationlayer unterschieden
                                                                                                  - einfache Markername bestehen aus dem Kategorienamen   --> 'cat1'
                                                                                                  - Infolayernamen betehen aus Kategoriename und Suffix 'Info'  --> 'cat1Info'
                                                                                                  um alle Layer zu schließen, muss die Methode so oft wiederholt werden, bis alle Kategorienamen erfasst wurden
                                  switchTo	BOOLEAN | FLOAT	Sichtbarkeitswert -->	true | false entspricht sichtbar bzw. unsichtbar
                                                                                                                                          Zahl zwischen 0 uns 1 definiert Transparenzgrad 
  */
          map.filterLayer(name,switchTo);
          map.filterLayer(name+'Info',switchTo);
  }

  </script>
  </body>
</html>
